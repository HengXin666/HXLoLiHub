"use strict";(self.webpackChunkhx_loli_hub=self.webpackChunkhx_loli_hub||[]).push([[1569],{81569:(e,t,r)=>{r.r(t),r.d(t,{MonacoDiffEditor:()=>d,default:()=>v,monaco:()=>n});var n=r(64899),o=r(96540);function u(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function i(){}var c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)};function l(e){var t=e.width,r=void 0===t?"100%":t,l=e.height,d=void 0===l?"100%":l,a=e.value,f=void 0===a?null:a,s=e.defaultValue,v=void 0===s?"":s,g=e.language,p=void 0===g?"javascript":g,h=e.theme,m=void 0===h?null:h,M=e.options,E=void 0===M?{}:M,y=e.overrideServices,O=void 0===y?{}:y,b=e.editorWillMount,C=void 0===b?i:b,w=e.editorDidMount,x=void 0===w?i:w,R=e.editorWillUnmount,j=void 0===R?i:R,N=e.onChange,V=void 0===N?i:N,S=e.className,U=void 0===S?null:S,D=e.original,L=void 0===D?null:D,P=e.originalUri,k=e.modifiedUri,W=(0,o.useRef)(null),_=(0,o.useRef)(null),F=(0,o.useRef)(null),T=(0,o.useRef)(null),I=u(r),$=u(d),q=(0,o.useMemo)((function(){return{width:I,height:$}}),[I,$]);return(0,o.useEffect)((function(){var e,t,r,o,u;W.current&&(C(n),_.current=n.editor.createDiffEditor(W.current,c(c(c({},U?{extraEditorClassName:U}:{}),E),m?{theme:m}:{}),O),e=null!=f?f:v,t=null==P?void 0:P(n),r=null==k?void 0:k(n),o=t&&n.editor.getModel(t),u=r&&n.editor.getModel(r),o?(o.setValue(L),n.editor.setModelLanguage(o,p)):o=n.editor.createModel(e,p,t),u?(o.setValue(e),n.editor.setModelLanguage(u,p)):u=n.editor.createModel(e,p,r),_.current.setModel({original:o,modified:u}),function(){x(_.current,n);var e=_.current.getModel().modified;F.current=e.onDidChangeContent((function(t){T.current||V(e.getValue(),t)}))}())}),[]),(0,o.useEffect)((function(){_.current&&_.current.updateOptions(c(c({},U?{extraEditorClassName:U}:{}),E))}),[U,E]),(0,o.useEffect)((function(){_.current&&_.current.layout()}),[r,d]),(0,o.useEffect)((function(){if(_.current){var e=_.current.getModel(),t=e.original,r=e.modified;n.editor.setModelLanguage(t,p),n.editor.setModelLanguage(r,p)}}),[p]),(0,o.useEffect)((function(){if(_.current){var e=_.current.getModel().modified;T.current=!0,_.current.getModifiedEditor().pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:f}]),_.current.getModifiedEditor().pushUndoStop(),T.current=!1}}),[f]),(0,o.useEffect)((function(){n.editor.setTheme(m)}),[m]),(0,o.useEffect)((function(){if(_.current){var e=_.current.getModel().original;L!==e.getValue()&&e.setValue(L)}}),[L]),(0,o.useEffect)((function(){return function(){if(_.current){j(_.current,n),_.current.dispose();var e=_.current.getModel(),t=e.original,r=e.modified;t&&t.dispose(),r&&r.dispose()}F.current&&F.current.dispose()}}),[]),o.createElement("div",{ref:W,style:q,className:"react-monaco-editor-container"})}l.displayName="MonacoDiffEditor";const d=l;var a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};function s(e){var t=e.width,r=void 0===t?"100%":t,c=e.height,l=void 0===c?"100%":c,d=e.value,s=void 0===d?null:d,v=e.defaultValue,g=void 0===v?"":v,p=e.language,h=void 0===p?"javascript":p,m=e.theme,M=void 0===m?null:m,E=e.options,y=void 0===E?{}:E,O=e.overrideServices,b=void 0===O?{}:O,C=e.editorWillMount,w=void 0===C?i:C,x=e.editorDidMount,R=void 0===x?i:x,j=e.editorWillUnmount,N=void 0===j?i:j,V=e.onChange,S=void 0===V?i:V,U=e.className,D=void 0===U?null:U,L=e.uri,P=(0,o.useRef)(null),k=(0,o.useRef)(null),W=(0,o.useRef)(null),_=(0,o.useRef)(null),F=u(r),T=u(l),I=(0,o.useRef)(S);I.current=S;var $=(0,o.useMemo)((function(){return{width:F,height:T}}),[F,T]);return(0,o.useEffect)((function(){var e=null!==s?s:g;if(P.current){var t=a(a({},y),w(n)||{}),r=null==L?void 0:L(n),o=r&&n.editor.getModel(r);o?(o.setValue(e),n.editor.setModelLanguage(o,h)):o=n.editor.createModel(e,h,r),k.current=n.editor.create(P.current,a(a(a({model:o},D?{extraEditorClassName:D}:{}),t),M?{theme:M}:{}),b),R(k.current,n),W.current=k.current.onDidChangeModelContent((function(e){var t;_.current||null===(t=I.current)||void 0===t||t.call(I,k.current.getValue(),e)}))}}),[]),(0,o.useEffect)((function(){if(k.current){if(s===k.current.getValue())return;var e=k.current.getModel();_.current=!0,k.current.pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:s}],void 0),k.current.pushUndoStop(),_.current=!1}}),[s]),(0,o.useEffect)((function(){if(k.current){var e=k.current.getModel();n.editor.setModelLanguage(e,h)}}),[h]),(0,o.useEffect)((function(){if(k.current){y.model;var e=f(y,["model"]);k.current.updateOptions(a(a({},D?{extraEditorClassName:D}:{}),e))}}),[D,y]),(0,o.useEffect)((function(){k.current&&k.current.layout()}),[r,l]),(0,o.useEffect)((function(){n.editor.setTheme(M)}),[M]),(0,o.useEffect)((function(){return function(){k.current&&(N(k.current,n),k.current.dispose()),W.current&&W.current.dispose()}}),[]),o.createElement("div",{ref:P,style:$,className:"react-monaco-editor-container"})}s.displayName="MonacoEditor";const v=s}}]);